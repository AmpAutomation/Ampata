<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://jmix.io/schema/ui/window"
        caption="msg://finStmtEdit.caption"
        focusComponent="form">
    <data>
        <instance id="finStmtDc"
                  class="ca.ampautomation.ampata.entity.SysNode"
                  fetchPlan="finStmt-fetch-plan-base">
            <loader/>
        </instance>

        <collection id="genDocsDc" class="ca.ampautomation.ampata.entity.SysNode">
            <fetchPlan extends="_instance_name"/>
            <loader id="genDocsDl">
                <query>
                    <![CDATA[select e from ampata_SysNode e where e.className = 'GenDoc' order by e.id2]]>
                </query>
            </loader>
        </collection>


        <collection id="genTagsDc" class="ca.ampautomation.ampata.entity.SysNode">
            <fetchPlan extends="_instance_name"/>
            <loader id="genTagsDl">
                <query>
                    <![CDATA[select e from ampata_SysNode e where e.className = 'GenTag' order by e.id2]]>
                </query>
            </loader>
        </collection>

        <collection id="genChansDc" class="ca.ampautomation.ampata.entity.SysNode">
            <fetchPlan extends="_instance_name"/>
            <loader id="genChansDl">
                <query>
                    <![CDATA[select e from ampata_SysNode e where e.className = 'GenChan' order by e.id2]]>
                </query>
            </loader>
        </collection>


    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
        <screenSettings id="settingsFacet" auto="true"/>
    </facets>
    <actions>
        <action id="windowCommitAndClose" caption="msg:///actions.Ok"
                icon="EDITOR_OK"
                primary="true"
                shortcut="${COMMIT_SHORTCUT}"/>
        <action id="windowClose"
                caption="msg:///actions.Close"
                icon="EDITOR_CANCEL"/>
    </actions>
    <dialogMode height="600"
                width="800"/>
    <layout spacing="true" expand="scrollBox">
        <scrollBox id="scrollBox" spacing="true">
            <form id="form" dataContainer="finStmtDc">
                <tabSheet width="1200px">
                <tab id="tab_1"
                     caption="General"
                     margin="true"
                     spacing="true">
                    <form id="tab1Form" dataContainer="finStmtDc">
                        <column width="350px">
                            <textField id="id2Field" property="id2"/>
                            <button id="id2Button" caption="Set id2" align="TOP_RIGHT"/>
                            <textField id="id2CalcField" property="id2Calc" editable="false"/>
                            <button id="id2CalcButton" caption="Refresh id2-Calc" align="TOP_RIGHT" colspan="2"/>
                            <checkBox id="id2CmpField" property="id2Cmp" editable="false"/>
                            <textField id="id2DupField" property="id2Dup" editable="false"/>
                            <textField id="classNameField" property="className" enable="false"/>
                            <entityPicker id="type1_IdField" property="type1_Id">
                                <actions>
                                    <action id="entityLookup" type="entity_lookup"/>
                                    <action id="entityClear" type="entity_clear"/>
                                </actions>
                            </entityPicker>
                            <textField id="type1_Id2Field" property="type1_Id2"/>
                            <textField id="instField" property="inst"/>
                            <textField id="name1Field" property="name1"/>
                            <textArea id="desc1Field" property="desc1" rows="8" rowspan="8"/>
                        </column>
                        <column width="350px">
                        </column>
                    </form>
                </tab>
                <tab id="tab_2"
                     caption="Docs, Files"
                     margin="true"
                     spacing="true">
                    <form id="tab2Form" dataContainer="finStmtDc">
                        <column width="350px">
                            <textArea id="genDocs1_Id2Field" property="genDocVers1_Id2" rows="4"/>
                            <entityComboBox id="genDocVer1_IdField" dataContainer="finStmtDc"
                                            optionsContainer="genDocsDc"
                                            property="genDocVer1_Id">
                                <actions>
                                    <action id="entityLookup" type="entity_lookup"/>
                                    <action id="entityClear" type="entity_clear"/>
                                </actions>
                            </entityComboBox>
                            <textField id="genDocVer1_Id2Field" property="genDocVer1_Id2"/>
                            <entityPicker id="genFile1_IdField" property="genFile1_Id">
                                <actions>
                                    <action id="entityLookup" type="entity_lookup"/>
                                    <action id="entityClear" type="entity_clear"/>
                                </actions>
                            </entityPicker>
                            <textField id="genFile1_Id2Field" property="genFile1_Id2"/>
                            <textArea id="genFile1_URIField" property="genFile1_URI" rows="4">
                            </textArea>
                        </column>
                        <column width="350px">
                        </column>
                    </form>
                </tab>
                    <tab id="tab_3"
                         caption="Chan, Tags"
                         margin="true"
                         spacing="true">
                        <form id="tab3Form" dataContainer="finStmtDc">
                            <column width="350px">
                                <entityComboBox id="genChan1_IdField" dataContainer="finStmtDc"
                                                optionsContainer="genChansDc"
                                                property="genChan1_Id">
                                    <actions>
                                        <action id="entityLookup" type="entity_lookup"/>
                                        <action id="entityClear" type="entity_clear"/>
                                    </actions>
                                </entityComboBox>
                                <textField id="genChan1_Id2Field" property="genChan1_Id2"/>
                            </column>
                            <column width="350px">
                                <entityComboBox id="genTag1_IdField" dataContainer="finStmtDc"
                                                optionsContainer="genTagsDc"
                                                property="genTag1_Id">
                                    <actions>
                                        <action id="entityLookup" type="entity_lookup"/>
                                        <action id="entityClear" type="entity_clear"/>
                                    </actions>
                                </entityComboBox>
                                <textField id="genTag1_Id2Field" property="genTag1_Id2"/>
                                <entityComboBox id="genTag2_IdField" dataContainer="finStmtDc"
                                                optionsContainer="genTagsDc"
                                                property="genTag2_Id">
                                    <actions>
                                        <action id="entityLookup" type="entity_lookup"/>
                                        <action id="entityClear" type="entity_clear"/>
                                    </actions>
                                </entityComboBox>
                                <textField id="genTag2_Id2Field" property="genTag2_Id2"/>
                                <entityComboBox id="genTag3_IdField" dataContainer="finStmtDc"
                                                optionsContainer="genTagsDc"
                                                property="genTag3_Id">
                                    <actions>
                                        <action id="entityLookup" type="entity_lookup"/>
                                        <action id="entityClear" type="entity_clear"/>
                                    </actions>
                                </entityComboBox>
                                <textField id="genTag3_Id2Field" property="genTag3_Id2"/>
                                <entityComboBox id="genTag4_IdField" dataContainer="finStmtDc"
                                                optionsContainer="genTagsDc"
                                                property="genTag4_Id">
                                    <actions>
                                        <action id="entityLookup" type="entity_lookup"/>
                                        <action id="entityClear" type="entity_clear"/>
                                    </actions>
                                </entityComboBox>
                                <textField id="genTag4_Id2Field" property="genTag4_Id2"/>
                            </column>

                        </form>
                    </tab>

                    <tab id="tab_4"
                     caption="Bal, Sum, Stat"
                     margin="true"
                     spacing="true">
                    <form id="tab4Form" dataContainer="finStmtDc">
                        <column width="350px">
                            <dateField id="begDate1Field" property="beg1.date1"
                                       caption="Beg.Date1" dateFormat="yyyy-MM-dd"/>
                            <dateField id="endDate1Field" property="end1.date1"
                                       caption="End.Date1" dateFormat="yyyy-MM-dd"/>
                        </column>
                        <column width="350px">
                            <textField id="amtBegBalField" property="amtBegBal">
                                <formatter>
                                    <number format="#,###.00"/>
                                </formatter>
                            </textField>
                            <textField id="amtDebtField" property="amtDebt">
                                <formatter>
                                    <number format="#,###.00"/>
                                </formatter>
                            </textField>
                            <textField id="amtCredField" property="amtCred">
                                <formatter>
                                    <number format="#,###.00"/>
                                </formatter>
                            </textField>
                            <textField id="amtNetField" property="amtNet" editable="false">
                                <formatter>
                                    <number format="#,###.00"/>
                                </formatter>
                            </textField>

                            <textField id="amtEndBalCalcField" property="amtEndBalCalc" editable="false">
                                <formatter>
                                    <number format="#,###.00"/>
                                </formatter>
                            </textField>

                            <textField id="statusField" property="status"/>
                            <button id="testBtn"/>
                        </column>
                    </form>
                </tab>
                </tabSheet>
            </form>
        </scrollBox>
        <hbox id="editActions" spacing="true">
            <button id="commitAndCloseBtn" action="windowCommitAndClose"/>
            <button id="closeBtn" action="windowClose"/>
        </hbox>
    </layout>
</window>
